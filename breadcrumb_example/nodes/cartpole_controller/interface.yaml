parameters:
  k1:
    type: double
    default_value: 0.0
    description: State feedback gain for cart position
    read_only: false

  k2:
    type: double
    default_value: 0.0
    description: State feedback gain for cart velocity
    read_only: false

  k3:
    type: double
    default_value: 0.0
    description: State feedback gain for pole angle
    read_only: false

  k4:
    type: double
    default_value: 0.0
    description: State feedback gain for pole angular velocity
    read_only: false

  robot_id:
    type: string
    default_value: "cartpole"
    description: Identifier for this robot instance, used in topic namespacing
    read_only: true

  safety_stop_sources:
    type: string_array
    default_value: ["safety_controller", "bumper"]
    description: Safety systems that can trigger an emergency stop
    read_only: true

subscribers:
  - topic: joint_states
    type: sensor_msgs/msg/JointState
    qos:
      history: 1
      reliability: BEST_EFFORT  # Matches simulator - compatible!
      durability: VOLATILE

  - topic: "/${param: robot_id}/${for_each_param: safety_stop_sources}/emergency_stop"
    field_name: emergency_stops
    type: std_msgs/msg/Bool
    qos:
      history: 1
      reliability: RELIABLE

publishers:
  - topic: force
    type: std_msgs/msg/Float64
    qos:
      history: 10
      reliability: RELIABLE
      durability: VOLATILE

  - topic: "/status/${param: robot_id}"
    field_name: status
    type: std_msgs/msg/String
    qos:
      history: 1
      reliability: RELIABLE

services:
  - name: enable
    type: std_srvs/srv/SetBool

actions:
  - name: track_position
    type: breadcrumb_example_interfaces/action/TrackPosition
